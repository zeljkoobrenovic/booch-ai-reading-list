"use strict";var FRUUGO_API_KEY,LANGUAGE_CODE,COUNTRY_CODE,CART_ID,BASE_URL="https://api.fruugo.com",FruugoAPI={config:{setBaseURL:function(e){BASE_URL=e},setAPIKey:function(e){FRUUGO_API_KEY=e},setLanguage:function(e){LANGUAGE_CODE=void 0===e?"en":e},setCountry:function(e){COUNTRY_CODE=void 0===e?"GB":e}},cart:{set:function(e){var t=localStorage.getItem("cartId");void 0!==e?(localStorage.setItem("cartId",e),CART_ID=parseInt(e)):null!==t&&(CART_ID=parseInt(t))},clear:function(){localStorage.removeItem("cartId"),CART_ID=null},get:function(e,t){if(CART_ID){var o=BASE_URL+"/v1/cart/"+CART_ID+"?language="+LANGUAGE_CODE+"&country="+COUNTRY_CODE,r=new XMLHttpRequest;r.open("GET",o,!0),r.setRequestHeader("fruugo-api-key",FRUUGO_API_KEY),r.onload=function(){if(200<=r.status&&r.status<400){var e=JSON.parse(r.responseText);0<e.totalNumberOfItems?t(e):(FruugoAPI.cart.clear(),t(!1))}else console.log("Server error!"),FruugoAPI.cart.clear(),t(!1)},r.onerror=function(){console.log("Connection error!")},r.send()}else t(!1)},add:function(e,t){var o=CART_ID?"PUT":"POST",r=CART_ID?BASE_URL+"/v1/cart/"+CART_ID+"/add-item":BASE_URL+"/v1/cart/create",n={skuId:e.skuId,quantity:e.quantity,countryCode:COUNTRY_CODE,languageCode:LANGUAGE_CODE},a=new XMLHttpRequest;a.open(o,r,!0),a.setRequestHeader("fruugo-api-key",FRUUGO_API_KEY),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){if(200<=a.status&&a.status<400){var e=JSON.parse(a.responseText);0<e.cartJson.totalNumberOfItems?(FruugoAPI.cart.set(e.cartJson.cartId),t(e.cartJson)):(FruugoAPI.cart.clear(),t(!1))}else console.log("Server error!")},a.onerror=function(){console.log("Connection error!")},a.send(JSON.stringify(n))},update:function(e,t){var o=BASE_URL+"/v1/cart/"+CART_ID+"/item",r={skuId:e.skuId,quantity:e.quantity,countryCode:COUNTRY_CODE,languageCode:LANGUAGE_CODE},n=new XMLHttpRequest;n.open("PUT",o,!0),n.setRequestHeader("fruugo-api-key",FRUUGO_API_KEY),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){if(200<=n.status&&n.status<400){var e=JSON.parse(n.responseText);0<e.cartJson.totalNumberOfItems?(FruugoAPI.cart.set(e.cartJson.cartId),t(e.cartJson)):(FruugoAPI.cart.clear(),t(!1))}else console.log("Server error!")},n.onerror=function(){console.log("Connection error!")},n.send(JSON.stringify(r))},remove:function(e,t){var o=BASE_URL+"/v1/cart/"+CART_ID+"/item",r={skuId:e.skuId,countryCode:COUNTRY_CODE,languageCode:LANGUAGE_CODE},n=new XMLHttpRequest;n.open("DELETE",o,!0),n.setRequestHeader("fruugo-api-key",FRUUGO_API_KEY),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){if(200<=n.status&&n.status<400){var e=JSON.parse(n.responseText);0<e.cartJson.totalNumberOfItems?(FruugoAPI.cart.set(e.cartJson.cartId),t(e.cartJson)):(FruugoAPI.cart.clear(),t(!1))}else console.log("Server error!")},n.onerror=function(){console.log("Connection error!")},n.send(JSON.stringify(r))}},product:{list:function(e,t){var o=BASE_URL+"/v1/productCollection/availableSKUs?language="+LANGUAGE_CODE+"&country="+COUNTRY_CODE,r=new XMLHttpRequest;r.open("GET",o,!0),r.setRequestHeader("fruugo-api-key",FRUUGO_API_KEY),r.onload=function(){if(200<=r.status&&r.status<400){var e=JSON.parse(r.responseText);t(e)}else console.log("Server error!")},r.onerror=function(){console.log("Connection error!")},r.send()},view:function(e,t){var o=BASE_URL+"/v1/productCollection/availableSKUs?language="+LANGUAGE_CODE+"&country="+COUNTRY_CODE,r=new XMLHttpRequest;r.open("GET",o,!0),r.setRequestHeader("fruugo-api-key",FRUUGO_API_KEY),r.onload=function(){if(200<=r.status&&r.status<400){var e=JSON.parse(r.responseText);t(e)}else console.log("Server error!")},r.onerror=function(){console.log("Connection error!")},r.send()}}};